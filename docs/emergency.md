# Σύστημα ασφαλής εκκένωσης κτιρίων

## Περιγραφή
Σχεδιάσαμε και υλοποιήσαμε ένα ευφυές σύστημα που βοηθά στην ασφαλή εκκένωση κτιρίων (π.χ. σχολεία, δημόσιες υπηρεσίες) σε περίπτωση έκτακτης ανάγκης όπως πυρκαγιές, σεισμοί κλπ.  Ένα σημαντικό σημείο διαφοροποίησης της συγκεκριμένης πρότασης σε σχέση με άλλα παρόμοια συστήματα είναι η υποστήριξη της δυνατότητας συνεργασίας μεταξύ των επιμέρους σταθμών «παρατήρησης και ειδοποίησης» καθώς και της απομακρυσμένης διαχείρισης τους. 

Η συνεργασία επιτρέπει στους σταθμούς να ενημερώνονται άμεσα και αυτοματοποιημένα για συγκεκριμένα γεγονότα από κάποιον άλλο σταθμό, με συνέπεια να προσαρμόζουν κατάλληλα τις οδηγίες που παρέχουν προς τους πολίτες ώστε να ταιριάζουν πάντα με τις συγκεκριμένες συνθήκες που επικρατούν. 

Γενικότερα, το σύστημα αποτελείται από ένα κέντρο ελέγχου και μια σειρά από επιμέρους σταθμούς «παρατήρησης και ειδοποίησης» που βρίσκονται τοποθετημένοι σε συγκεκριμένα σημεία σε κάποιο  κτίριο. Μια γενική περιγραφή παρουσιάζεται στο παρακάτω σχήμα.

IMAGE

Κάθε σταθμός βασίζεται αποκλειστικά σε ανοιχτό υλικό και περιλαμβάνει: 
* ένα Raspberry Pi 3 
* ένα αισθητήρα εντοπισμού φωτιάς ή ένα αισθητήρα εντοπισμού αερίων
* ένα μπλε LED, που αναβοσβήνει και αντιστοιχεί στην περίπτωση που δεν υπάρχει οποιοδήποτε έκτακτο γεγονός 
* ένα κόκκινο LED, που αναβοσβήνει όταν έχει εντοπιστεί κάποιο έκτακτο γεγονός (είτε από τον ίδιο τον σταθμό είτε από κάποιον άλλον) και αντιστοιχεί στην περίπτωση που ο σταθμός παίζει κάποιο μήνυμα εκκένωσης
* ένα φορητό ηχείο, για την αναπαραγωγή των ηχογραφημένων μηνυμάτων


## Εγκατάσταση

Για την χρήση του συστήματος θα πρέπει υποχρεωτικά να έχει προηγηθεί η εγκατάσταση της βιβλιοθήκης OpenMIC τόσο στο μηχάνημα που θα φιλοξενεί το κέντρο ελέγχου όσο και σε όλα τα Raspberry Pi.  Αναλυτικές πληροφορίες για την εγκατάσταση της βιβλιοθήκης υπάρχουν στο σύνδεσμο LINK STO OPENMIC INSTALLATION.

Στη συνέχεια θα πρέπει να εγκατασταθούν σε όλα τα μηχανήματα οι αναγκαίες βιβλιοθήκες (PyQt5 και pygame):
# sudo apt-get install python3-pyqt5
# sudo pip3 install pygame

Επιπλέον, θα πρέπει να υπάρχει σύνδεση μεταξύ του κέντρου ελέγχου και των σταθμών εργασίας ώστε να μπορούν να ανταλλάσσουν τα απαραίτητα μηνύματα. Έτσι, θα πρέπει να ρυθμιστούν κατάλληλα οι παράμετροι επικοινωνίας στην εφαρμογή του κέντρου ελέγχου (αρχείο ControlMonitor.py , μέθοδος setup_openmic_controller() )  και των σταθμών (αρχείο MonitoringStation.py , μέθοδος __init__() ). Περισσότερες πληροφορίες για τις παραμέτρους σύνδεσης υπάρχουν στην σελίδα περιγραφής της βιβλιοθήκης OpenMIC LINK STO OPENMIC DESCRIPTION.
Γενικότερα, το σύστημα αντιστοιχεί στην περίπτωση που η βιβλιοθήκη OpenMIC μας παρέχει τη δυνατότητα τόσο για κεντρικό έλεγχο πολλαπλών Raspberry Pi συσκευών όσο και τη δυνατότητα συνεργασίας μεταξύ τους μέσω της άμεσης ανταλλαγής μηνυμάτων.
Στη συνέχεια θα πρέπει σε κάθε σταθμό «παρατήρησης και ειδοποίησης» να συνδεθούν οι αισθητήρες και τα LEDs στα προκαθορισμένα GPIO pins με τα οποία έχει προγραμματιστεί η εφαρμογή. Στο σχήμα που ακολουθεί παρουσιάζουμε το κύκλωμα και τις απαραίτητες συνδέσεις. Τέλος, θα πρέπει να συνδέσουμε ένα εξωτερικό φορητό ηχείο στο Raspberry Pi στην αντίστοιχη είσοδο.

 
Έχοντας ολοκληρώσει τα παραπάνω βήματα θα έχουμε πλέον ένα ολοκληρωμένο σταθμό «παρατήρησης και ειδοποίησης» όπως φαίνεται στο παρακάτω εικόνα.

 

Σε αντίθεση με την βιβλιοθήκη OpenMIC που υπάρχει η δυνατότητα κεντρικής  εγκατάστασης σε κάποιο υπολογιστή μέσω της εκτέλεσης της αντίστοιχης εντολής,  για την περίπτωση του συστήματος ασφαλής εκκένωσης κτιρίων απλά πηγαίνουμε στους αντίστοιχους φακέλους και εκτελούμε τις εφαρμογές. Αν θέλουμε να μεταφέρουμε σε διαφορετική θέση από εκείνη που έγιναν clone θα πρέπει η μεταφορά να περιλαμβάνει το πλήρες περιεχόμενο του κάθε υπο-φακέλου (/examples/emergency/station/   &  /examples/emergency/control_monitor/) και όχι μόνο το κεντρικό αρχείο κάθε εφαρμογής ( ControlMonitor.py & MonitoringStation.py ).
Για την έναρξη της εκτέλεσης του κέντρου ελέγχου αφού είμαστε στον αντίστοιχο φάκελο εκτελούμε απλά την εντολή:
# python3 ControlMonitor.py

Για την εκτέλεση του σταθμού «παρατήρησης και ειδοποίησης» αφού είμαστε στον αντίστοιχο φάκελο εκτελούμε την εντολή με το κατάλληλα όρισμα (0 ή 1 ή 2 ή 3) για να προσδιορίσουμε ποιος συγκεκριμένες σταθμός είναι. 
# python3 MonitoringStation.py  [0|1|2|3]

Σημείωση: Θα πρέπει για κάθε σταθμό να προσδιορίζουμε διαφορετικό όρισμα για να μπορεί το σενάριο να εκτελείται σωστά και να ακούμε τα κατάλληλα ηχητικά μηνύματα. Αν εκτελούμε το σενάριο με λιγότερους σταθμούς πάλι σημαντικό είναι να διαλέγουμε διαφορετικά ορίσματα και όχι τόσο ποια θα επιλέξουμε.



## Λειτουργία
